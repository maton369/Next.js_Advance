"use client"; // ★: "use client" ディレクティブを追加する（＝このファイルをクライアントコンポーネントとして扱う）

/**
 * LikeButton（「いいね」ボタン）
 *
 * - Next.js App Router では、デフォルトでコンポーネントは Server Component として扱われる。
 * - しかし、クリックなどのブラウザイベント（onClick）や useState/useEffect といった
 *   クライアント専用の機能を使うには Client Component である必要がある。
 *
 * そのため、このファイルの先頭に `"use client";` を置いて、
 * - 「このコンポーネントはブラウザで動く（クライアント側で実行される）」
 * と宣言している。
 *
 * アルゴリズム的な見方（UIイベント → 処理の流れ）：
 * 1. サーバで生成された HTML がブラウザに表示される
 * 2. ブラウザ上で React が“水和（Hydration）”され、イベントが紐づく
 * 3. ユーザーがボタンをクリックする
 * 4. onClick ハンドラが呼ばれ、photoId を使った処理が実行される（ここでは console.log）
 *
 * ※ Server Component だけだと 2〜4 が成立しないため、"use client" が必要になる。
 */
export function LikeButton({ photoId }: { photoId: string }) {
  /**
   * Props: photoId
   *
   * - どの写真に対する「いいね」なのかを識別するためのID。
   * - このコンポーネントは「UI部品」として汎用化されており、
   *   親コンポーネントが photoId を渡すことで、写真ごとに同じボタンを使い回せる。
   *
   * 実運用では、この photoId を使って
   * - API に「いいね」リクエストを送る
   * - 状態（いいね数、押したかどうか）を更新する
   * などの処理につなげるのが典型。
   */

  // ★: onClick イベントハンドラーを追加したい
  return (
    /**
     * <button> 要素
     *
     * - ボタンはクリック可能なUI要素であり、キーボード操作（Enter/Space）にも対応しやすい。
     * - React では onClick でクリック時の処理を宣言できる。
     *
     * ここで重要なのは：
     * - onClick はブラウザ上で動くイベントなので Client Component が必須
     * - そのためにファイル先頭の "use client" が必要
     */
    <button
      /**
       * onClick（クリックイベントハンドラ）
       *
       * - クリックされた瞬間に呼ばれる関数を渡している。
       * - ここでは無名関数（アロー関数）を直接書いて、
       *   photoId をクロージャとして参照できるようにしている。
       *
       * アルゴリズム的には：
       * - クリックイベント発生
       * - React が登録済みハンドラを呼ぶ
       * - photoId を使って処理を実行する
       */
      onClick={() => {
        /**
         * 現状はログ出力のみ
         *
         * - console.log は「本当にクリックイベントが発火しているか」を確認するための最小実装。
         * - 次のステップとしては、ここを API 呼び出しに置き換えたり、
         *   useState で「いいね済み」状態を持って UI を変える（色を変える等）実装に繋げる。
         */
        console.log(`photoId ${photoId} が「いいね」されました`);
      }}
    >
      {/**
       * ボタンの表示テキスト
       *
       * - ここは UI/UX 的に、状態に応じて変えることもある（例：「いいね済み」）。
       */}
      いいね
    </button>
  );
}